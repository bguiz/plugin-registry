language: node_js
node_js:
- '0.10'
- '0.11'
- '0.12'
- iojs
- iojs-v1.0.4
script:
- echo "TRAVIS_PULL_REQUEST=${TRAVIS_PULL_REQUEST} TRAVIS_BRANCH=${TRAVIS_BRANCH} TRAVIS_BUILD_NUMBER=${TRAVIS_BUILD_NUMBER} TRAVIS_JOB_NUMBER=${TRAVIS_JOB_NUMBER}"
- npm run lint
- npm run cover
after_success:
- npm run coveralls
- |
    test ${TRAVIS_PULL_REQUEST} == "false" && \
    test ${TRAVIS_BRANCH} == "${DOCUMENT_BRANCH}" && \
    test "${TRAVIS_BUILD_NUMBER}.1" == "${TRAVIS_JOB_NUMBER}" && \
    npm run document && \
    npm run publishdocs
env:
  global:
  - secure: K/HNcyYwuAiTY+hLprjFCUkGDor5q5raVdZ32c1R4bwdpFvz9bqStic5CERXhXRguQZO0b2xCEF63njsuYVIX+wGx8nQd9dwRIYgbDjZiw3+X2I02THXs/Q0Q7b3PZlWhrXO33axn3zBLXWZmJK52RSCq8jkwy4dQVU9vPKyGbY=
  - GH_USER: bguiz
  - GH_REPO: plugin-registry
  - GIT_USER: Travis CI Git User
  - GIT_EMAIL: travis.ci.git.user@bguiz.com
  - DOCUMENT_BRANCH: master
